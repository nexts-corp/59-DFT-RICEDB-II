<link rel="import" href="./../../components/format-number-behavior.html">
<dom-module id="calculate-list">
    <template>
        <style is="custom-style" include="gl-table">
            .container {
                padding: 20px;
                border: 1px solid #ddd;
                border-radius: 5px;
            }

            
            .container>div {
                font-size: 24px;
                padding: 0px 10px 10px 10px;
            }
            
            .right {
                text-align: right !important;
            }
            
            .center {
                text-align: center;
            }
            
            .left {
                text-align: left;
            }
        </style>


        <div class="container">
            <div>ประเภท : {{typeRiceName}}</div>

            <table class="gl-table-default" style="border: 1px solid #ddd;">
                <thead>
                    <tr>
                        <th>คำนวณครั้งที่</th>
                        <th class="right">ยอดรวมการส่งออกที่ผ่านมา</th>
                        <th class="right">ยอดรวมประวัติการส่งออกเพื่อคำนวณส่วนจัดสรร</th>
                        <th class="right">ยอดรวมโควตาที่เคยได้รับ</th>
                        <th class="right">ปริมาณโควตา 100%</th>
                    </tr>
                </thead>
                <template is="dom-repeat" items="{{listData}}">
                    <tbody>
                        <template is="dom-repeat" items="{{item.detail}}">
                            <tr on-tap="_selectData" key="[[item.id]]" style="cursor:pointer;">
                                <td>[[item.ordinal_number]]</td>
                                <td class="right">[[formatNumber(item.sum_export)]]</td>
                                <td class="right">[[formatNumber(item.sum_for_cal)]]</td>
                                <td class="right">[[formatNumber(item.sum_quota)]]</td>
                                <td class="right">[[formatNumber(item.quota_amount)]]</td>
                            </tr>
                        </template>
                    </tbody>
                </template>
            </table>

        </div>

    </template>
    <script>
        Polymer({
            is: 'calculate-list',
            behaviors:[FormatNumberBehavior],
            properties:{
                listData:{
                    type: Array,
                    observer: '_getDatalist'
                }
            },
            _selectData:function(e){
                // console.log(e.currentTarget.key);
                this.fire('data-select',{key:e.currentTarget.key});
            },
            _getDatalist:function(){
                console.log('list',this.listData);
                this.listData.map((item)=>{
                    // console.log(item);
                    this.typeRiceName = item.type_rice_name_th;
                   // listData = item.detail;
                });
            }
            
        });
    </script>
</dom-module>