<link rel="import" href="panel-seleted.html">
<link rel="import" href="components/grid/nx-grid.html">
<link rel="import" href="components/content-panel.html">

<link rel="import" href="components/period/period-lot.html">
<link rel="import" href="components/period/period-edit.html">
<link rel="import" href="components/period/period-city.html">
<link rel="import" href="components/promise/promise-fileup.html">
<link rel="import" href="components/vessel/vessel-print.html">
<link rel="import" href="components/list-edit/list-period.html">
<dom-module id="gtog-add-period">

  <template>


    <content-panel>
      <grid>
        <nx-grid data="{{data}}">
          <items type="primary">
            <list item="periodNo" label="งวดที่" width="flex"></list>
            <list item="quantity" label="จำนวน/ตัน" width="flex"></list>
          </items>
          <items type="secondary" item="sub">
            <list item="" label="" width="flex"></list>
            <list item="cityDestination" label="เมืองท่าปลายท่า" width="flex-9"></list>
          </items>
          <template type="primary">
            <input placeholder="text" value="primary">
          </template>
          <template type="secondary">
            <input placeholder="text" value="secondary">
          </template>
        </nx-grid>
      </grid>
      <panel>
        <panel-seleted>
          <section-content name="detail">

            <!-- <iron-pages selected="{{layerContent}}" attr-for-selected="name">
              <period-lot name="primary" data="{{dataSelect}}"></period-lot>
              <period-city name="secondary" data="{{dataSelect}}"></period-city>
            </iron-pages> -->

            <list-period data="{{data}}">
              <items type="primary">
                <list item="cityDestination" label="เมืองท่าปลายทาง" width="flex"></list>
                <list item="quantity" label="จำนวน/ตัน" width="flex"></list>
              </items>
              <items type="secondary" item="sub" style="display:none;">
                <list>
                  <paper-input label="ทดสอบการปิด" disabled value="ทดสอบการเพิ่ม"></paper-input>
                </list>
              </items>
            </list-period>

          </section-content>
          <section-content name="print">
            <vessel-print></vessel-print>
          </section-content>
          <section-content name="file">
            <promise-fileup></promise-fileup>
          </section-content>
        </panel-seleted>

      </panel>
    </content-panel>

  </template>
  <script>
    Polymer({
      is: "gtog-add-period",
      listeners:{
        'nx-grid-tap':'nxGridTap',
        'nx-grid-dblclick':'nxGridDblclick'
      },
      behaviors: [
        gl.behavior.core,
        gl.behavior.locales
      ],
      properties:{
        layerContent:{
          type:String,
          value:"primary"
        },
        pageSeletedDetail:{
            type:String,
            value:'periodLot'
          },
          data:{
            type:Object,
            value:function(){
              return [
                {
                  id:1 ,
                  collapse:'collapsel1',
                  periodNo:1,
                  quantity:50000,
                  cityDestination:'Husngpu',
                  notifyParty:'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                },
                {
                  id:2 ,
                  collapse:'collapsel2',
                  periodNo:12,
                  quantity:70000,
                  cityDestination:'Wuhu',
                  notifyParty:'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                }
              ]}
        }
      },
      created:function(){
        this.glSetTitle('ทำสัญญา');
        this.glSetLayout('layout-main');
      },
      nxGridTap:function(e){
        this.layerContent = e.detail.level;
        this.dataSelect = e.detail.data;
        // console.log(this.dataSelect);
      },
      nxGridDblclick:function(e){
        if (e.detail.level != 'primary') {
          this.glChangePath('/gtog/add-vessel');
        }
      }

    });
  </script>
</dom-module>
