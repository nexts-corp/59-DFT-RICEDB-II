<link rel="import" href="components/grid/nx-grid.html">
<link rel="import" href="components/content-panel.html">
<link rel="import" href="components/my-panel.html">

<link rel="import" href="components/payment/payment-detail.html">
<link rel="import" href="components/payment/payment-print.html">
<link rel="import" href="components/promise/promise-fileup.html">
<dom-module id="gtog-search-payment-detail">

  <template>


    <content-panel>
      <grid>
        <nx-grid data="{{data}}">
          <items type="primary">
            <list item="periodNo" label="งวดที่" width="flex"></list>
            <list item="quantity" label="จำนวน (ตัน)" width="flex"></list>
          </items>
          <items type="secondary" item="sub">
            <list item="" label="" width="flex"></list>
            <list item="order" label="รายละเอียดการรับเงิน" width="flex-9"></list>
          </items>
          <template type="primary">
            <input placeholder="text" value="primary">
          </template>
          <template type="secondary">
            <input placeholder="text" value="secondary">
          </template>
        </nx-grid>
      </grid>
      <panel>
        <panel-seleted>
          <section-content name="detail">

            <iron-pages selected="{{layerContent}}" attr-for-selected="name">
              <payment-detail name="secondary" data="{{dataSelect}}"></payment-detail>
            </iron-pages>

          </section-content>
          <section-content name="print">
            <payment-print></payment-print>
          </section-content>
          <section-content name="file">
            <promise-fileup></promise-fileup>
          </section-content>
        </panel-seleted>

      </panel>
    </content-panel>

  </template>
  <script>
    Polymer({
      is: "gtog-search-payment-detail",
      listeners:{
        'nx-grid-tap':'nxGridTap',
        'nx-grid-dblclick':'nxGridDblclick'
      },
      behaviors: [
        nxCoreBehavior,
        nxLocalesBehavior
      ],
      properties:{
          layerContent:{
            type:String,
            value:"primary"
          },
          pageSeletedDetail:{
            type:String,
            value:'paymentDetail'
          },
          data:{
            type:Object,
            value:function(){
              return [
                {
                  id:1 ,
                  periodNo:11,
                  quantity:300000,
                  sub:[
                    {
                      id:'1',
                      periodNo:11,
                      date:'16/03/2558',
                      order:'1',
                      paymentProduct:[{
                        product:[
                          {
                            id:1,
                            productNo:'C277/2558',
                            quantity:1000,
                            value:'392,000.00'
                          },
                          {
                            id:2,
                            productNo:'C278/2558',
                            quantity:2000,
                            value:'400,000.00'
                          }
                        ],
                        totalton:2000,
                        totalValue:'784,000.00',
                        feeusd:38.83,
                        amountReceived:'500,000',
                        t:'xx',
                        ktb:'xx',
                        bath:'500,000',
                        feethb:'30',
                        receivedBath:900000
                      }],
                      totalton:4000,
                      valueUsd:40000,
                      feeusd:38,
                      receivedUsd:50000,
                      receivedBath:1000000,
                      feethb:30,
                      receivedMoney:100000,
                      detail:'รายละเอียดเพิ่มเติมเพิ่มตรงนี้ได้'
                    }
                  ]
              }
            ]
          }
        }
      },
      created:function(){
        this.nxSetTitle('ทำสัญญา');
        this.nxSetLayout('layout-main');
      },
      nxGridTap:function(e){
        this.layerContent = e.detail.level;
        this.dataSelect = e.detail.data;
        // console.log(this.dataSelect);
      },
      nxGridDblclick:function(e){
        // if (e.detail.level == 'primary') {
        //   this.nxChangePath('/gtog/add-period');
        // }
      }

    });
  </script>
</dom-module>
