<script>
  g2gModelBehavior = {
      properties: {
        checkInput:{
          type:Boolean,
          value:true
        },
        checkBtn:{
          type:Boolean,
          value:false
        }
      },
      test:function () {
        console.log('ถึงแล้วววว');
      },
      editInput:function () {
        this.checkInput = !this.checkInput;
        this.checkBtn = !this.checkBtn;
        // this.async(()=> {});
      },
      checkBtnView:function (data) {
        return data == true;
      },
      //approve function
      approve:function (data) {
        // console.log(data);
        return data = !data;
      },
      // CRUD
      // Create (Insert)
      // Exsameple
      // this.insert('./g2g/confirm/insert',this.confirmLetter, () => {
      //   this.glQuery('addContract').getChange(false,'put');
      //   this.glQuery('contentPanel').changDrawer();
      //   this.backPage();
      //  });
      insert:function (url,data,actionInpage) {

        axios.post(url, data)
                  .then((response)=> {
                    // console.log("success");
                    // console.log(response);
                    this.fire('toast',{status:'load'}); //คำสั่งสำหรับเปิด toast load
                    // console.log(response.data.id != null);
                    if (response.data.id != null) {
                      this.fire('toast',{status:'success',text:'บันทึกสำเร็จ',  // คำสั่งสำหรับเปิด toast success
                         callback:function(){
                           actionInpage();
                         }
                      });
                    } else {
                      this.fire('toast',{status:'connectError',text:'ไม่สามารถบันทึกได้', //คำสั่งสำหรับเปิด toast error
                        callback:function(){}
                      });
                    }
                  })
                  .catch((error)=> {
                    // console.log("error");
                    // console.log(error);
                    this.fire('toast',{status:'connectError',text:'Can not connect the database server', //คำสั่งสำหรับเปิด toast error
                      callback:function(){}
                    });
                  })

      },
      //READ
      // Exsameple
      // this.read('./common/buyer',(data)=>{
      //   this.buyyer=data;
      // },false,'put');
      read:function (url,callback,refresh,action) {
        axios.get(url)
              .then((response)=> {
                // console.log("success");
                console.log(response.data);
                // actionInpage();
                callback(response.data);
                switch (action) {
                  //read
                    case 'get':
                              // this.glQuery('layoutMain').closeToastLoading(()=>{
                              //   this.checkRefresh(refresh);
                              // });
                    break;
                    // insert & updoate
                    case 'put':
                            this._checkRefresh(refresh);
                    break;
                    case 'delete':
                              // this.glQuery('layoutMain').closeToastDeleteing(()=>{
                              //   this.checkRefresh(refresh);
                              // });
                    break;
                }
              })
              .catch((error)=> {
                // console.log("error");
                // console.log(error);
                this.fire('toast',{status:'connectError',text:'Can not connect the database server', //คำสั่งสำหรับเปิด toast error
                  callback:function(){}
                });
              })
      },
      _checkRefresh:function (refresh) {
        if (refresh == true) {
          this.glQuery('contentPanel').changDrawer();
        }
      },
      // UPDATE
      // Exsameple
      // this.update('./g2g/contract/update',this.Newdata, () => {
      //   this.glQuery('addContract').getChange(false,'put');
      //   this.editInput();
      //  });
      update:function (url,data,actionInpage) {
        axios.put(url, data)
                  .then((response) => {
                    console.log("success");
                    console.log(response);
                    // this.actionInpage();
                    actionInpage();
                  })
                  .catch((error)=> {
                    console.log("error");
                    console.log(error);
                  })
      },
      //DELETE
      // Exsameple
      // this.delete('./g2g/confirm/delete/id/',this.confirmLetter.cl_id, () => {
      //   this.glQuery('addContract').getChange(false,'delete');
      //   this.glQuery('contentPanel').changDrawer();
      //   this.editInput();
      //   this.backPage();
      //  });
      delete:function (url,dataId,actionInpage) {
        axios.delete(url+dataId)
                  .then((response)=> {
                    console.log("success");
                    console.log(response);
                    actionInpage();
                  })
                  .catch((error)=> {
                    console.log("error");
                    // console.log(error);
                  })
      },
      changeString2Num:function(ob,param){
        //console.log(typeof ob.value);
        if(typeof ob.value == "string"){
          var pathChange = ob.path.split(".");
          if(pathChange.length == 2){
              if(pathChange[1]==param){
                ob.base[param]=parseFloat(ob.value);
                // console.log(typeof ob.value);
              }
          }
        }
      },
    };
  </script>
