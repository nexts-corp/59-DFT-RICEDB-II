<link rel="import" href="../../../../../bower_components/gl-styles/gl-table.html">
<dom-module id="draft-payment">
  <style is="custom-style" include="iron-flex iron-flex-factors iron-flex-alignment gl-table gl-color">
    :host {
      display: block;
      --paper-checkbox-margin: 0px 0px 0px 20px;
      /*background-color: var(--gl-primary-color);*/
    }
    .table-head > tr > th:nth-child(1) {
      width: 5%;
    }
    .table-head > tr > th:nth-child(2) {
      width: 20%;
    }
    .table-head > tr > th:nth-child(3) {
      width: 30%;
    }
    .table-head > tr > th:nth-child(4) {
      width: 45%;
    }
    .labelSearch{
    font-size: var(--font-size-h4);
    margin: 10px 10px 10px 10px;
    font-family: 'rsuregular', sans-serif;
    -webkit-font-smoothing: antialiased;
    }
    td {
      cursor:pointer;
    }
    .btnMoney {
      margin: 20px 20px 0px 0px;
      padding: 0px 0px 20px 20px;
    }
  </style>
  <template>
    <div class="flex searchInput ">
       <div class="horizontal end-justified layout">
         <div class="labelSearch">B/L No.</div>{{searchInput}}
         <paper-input label=" " no-label-float value="{{searchInput}}"></paper-input>
         <paper-icon-button icon="search"></paper-icon-button>
       </div>
   </div>
    <table class="gl-table-default">
      <thead class="table-head">
        <tr>
          <th>
            <!-- <paper-checkbox class="checkBox" data="{{itemSecondary}}"></paper-checkbox> -->
          </th>
          <th>Shipment No</th>
          <th>Invoice </th>
          <th>Confirmation Letter</th>
        </tr>
      </thead>
      <tbody>
        <template is="dom-repeat" items="[[data]]" as="payment">
          <template is="dom-repeat" items="[[payment.invoice_detail]]" filter="{{_filter(searchInput)}}">
            <tr data="[[item]]" on-tap="_getBind" level="secondary" >
              <td><paper-checkbox class="checkBox" data="{{item.invoice_id}}"></paper-checkbox></td>
              <td>[[payment.shm_no]]</td>
              <td>[[item.invoice_no]]</td>
              <td>[[item.cl_name]]</td>
            </tr>
          </template>
        </template>

      </tbody>
  </table>
  <div class="horizontal end-justified layout btnMoney">
     <paper-button class="gl-btn-success" raised on-tap="payMoney">ได้รับเงิน</paper-button>
  </div>
  </template>
  <script>
    Polymer({
      is: "draft-payment",
      properties: {
        searchInput: {
          type: String,
          // observer:'_searchInData'
        }
      },
      _searchInData:function (e) {
        console.log(e);
        console.log(this.data);
      },
      _filter: function(val) {
        console.log(val);
        // return function(val) {
        //     return item.type == type || item.manager.type == type;
        // }
        // return function(person) {
        //   if (!val) return true;
        //   if (!person) return false;
        //   return (person.name && ~person.name.indexOf(val));
        // };
      },
      payMoney:function () {
        // aria-checked="true"
        var check = Polymer.dom(this.root).querySelectorAll('paper-checkbox[aria-checked="true"]');
        // console.log(Polymer.dom(this.root).querySelectorAll('paper-checkbox[aria-checked="true"]'));
        
        this.fire('select-draftPayment', {
            data: check
          });
      },
      _getBind: function(e) {
        // console.log(e.currentTarget.data);
        this.fire('select-invoice', {
            data: e.currentTarget.data
          });
        this.fire('nx-grid-' + e.type, {
            data: e.currentTarget.data,
            level: e.currentTarget.getAttribute('level')
          });
      },

    });
  </script>
</dom-module>
