<link rel="import" href="panel-seleted.html"> ้
<link rel="import" href="panel-seleted-vessel.html">
<link rel="import" href="components/grid/nx-grid.html">
<link rel="import" href="components/content-panel.html">

<link rel="import" href="components/promise/promise-confirm.html">
<link rel="import" href="components/promise/promise-detail.html">
<link rel="import" href="components/promise/promise-fileup.html">
<link rel="import" href="components/vessel/vessel-print.html">
<link rel="import" href="components/period/period-page.html">
<link rel="import" href="components/vessel/vessel-page.html">
<link rel="import" href="components/invoice/invoice-create.html">

<link rel="import" href="data/db-gtog-contact.html">
<link rel="import" href="test.html">

<dom-module id="gtog-add-contract">
    <style is="custom-style">
        * {
            font-family: 'rsuregular', sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        .left {
            margin: 0px 10px 0px 10px;
        }
    </style>
    <template>
        <db-gtog-contact></db-gtog-contact>

        <content-panel>
            <grid>
                <nx-grid data="{{data}}">
                    <items type="primary">
                        <list item="promiseName" label="ชื่อ" width="flex-2"></list>
                        <list item="totalRice" label="ทั้งหมด (ตัน) /" width="flex"></list>
                        <list item="sendRice" label="ส่งแล้ว (ตัน) /" width="flex"></list>
                        <list item="balanceRice" label="เหลือ (ตัน)" width="flex"></list>
                    </items>
                    <items type="secondary" item="sub">
                        <!-- <list item="" label="" width=""></list> -->
                        <list item="confirmLetter" label="Confirmation Letter" width="flex-2"></list>
                        <list item="cmlTotalRice" label="" width="flex"></list>
                        <list item="cmlSendRice" label="" width="flex"></list>
                        <list item="cmlBalanceRice" label="" width="flex"></list>
                    </items>
                    <items type="secondaryHalf" item="sub">
                        <list item="" label="" width="flex"></list>
                        <list item="period" label="+ เพิ่ม Confirmation Letter" width="flex-12"></list>
                    </items>
                    <items type="third" item="sub3">
                        <!-- <list item="" label="" width=""></list> -->
                        <list item="period" label="งวดการส่งมอบ" width="flex-9"></list>
                    </items>
                    <items type="thirdHalf" item="sub3">
                        <list item="" label="" width="flex"></list>
                        <list item="period" label="+ เพิ่มงวด" width="flex-12"></list>
                    </items>
                    <template type="primary">
                        <input placeholder="text" value="primary">
                    </template>
                    <template type="secondary">
                        <input placeholder="text" value="secondary">
                    </template>
                    <template type="third">
                        <input placeholder="text" value="third">
                    </template>
                </nx-grid>
            </grid>
            <panel>
                <div class="left">

                    <iron-pages selected="{{vesselPage}}">
                        <panel-seleted>
                            <section-content name="detail">
                                <iron-pages selected="{{layerContent}}" attr-for-selected="name">
                                    <promise-detail name="primary" data="{{dataSelect}}"></promise-detail>
                                    <promise-confirm name="secondary" data="{{dataSelect}}"></promise-confirm>
                                </iron-pages>
                            </section-content>
                            <section-content name="print">
                                <vessel-print></vessel-print>
                            </section-content>
                            <section-content name="file">
                                <promise-fileup></promise-fileup>
                            </section-content>
                        </panel-seleted>
                        <!-- vesse -->

                        <panel-seleted-vessel>
                            <section-content name="detail">
                                <iron-pages selected="{{layerContent}}" attr-for-selected="name">
                                    <!-- <promise-detail name="primary" data="{{dataSelect}}"></promise-detail> -->
                                    <period-page name="third" data="{{dataSelect}}"> </period-page>
                                </iron-pages>

                            </section-content>
                            <section-content name="print">
                                <vessel-page data="{{dataSelect}}"></vessel-page>
                            </section-content>
                            <section-content name="file">
                                <promise-fileup></promise-fileup>
                            </section-content>
                        </panel-seleted-vessel>
                        <!-- vesse -->
                    </iron-pages>
                </div>
            </panel>
        </content-panel>
    </template>
    <script>
        Polymer({
            is: "gtog-add-contract",
            listeners: {
                'nx-grid-tap': 'nxGridTap',
                'nx-grid-dblclick': 'nxGridDblclick'
            },
            behaviors: [
                gl.behavior.core,
                gl.behavior.locales
            ],
            properties: {
                layerContent: {
                    type: String,
                    value: "primary"
                },
                vesselPage: {
                    type: Number,
                    value: 0
                }
            },
            created: function() {
                this.glSetTitle('ระบบการขายและการส่งมอบข้าวรัฐบาลต่อรัฐบาล');
                this.glSetLayout('layout-main');
                this.glQuery('contentPanel');
            },
            attached: function() {
                this.layoutMain = this.glQuery('layoutMain');
            },
            nxGridTap: function(e) {
                this.layerContent = e.detail.level;
                if (this.layerContent === 'third') {
                    this.vesselPage = 1;
                    this.glQuery('data-port').selectIndex = e.detail.index;
                    this.glQuery('data-export').selectIndex = e.detail.index;
                } else {
                    this.vesselPage = 0;
                    this.glQuery('data-confirmation').selectIndex = e.detail.index;
                }


                this.glQuery('contentPanel').changDrawer();

            },
            nxGridDblclick: function(e) {
                // if (e.detail.level == 'primary') {
                // this.glChangePath('/gtog/add-period');
                //this.layoutMain.changePath('/gtog/add-period');
                // }
            }

        });
    </script>
</dom-module>
