<link rel="import" href="panel-seleted.html"> ้
<link rel="import" href="panel-seleted-vessel.html">
<link rel="import" href="components/grid/nx-grid.html">
<link rel="import" href="components/content-panel.html">

<link rel="import" href="../database/con-db.html">

<link rel="import" href="components/promise/promise-confirm.html">
<link rel="import" href="components/promise/promise-detail.html">
<link rel="import" href="components/promise/promise-fileup.html">
<link rel="import" href="components/vessel/vessel-print.html">
<link rel="import" href="components/period/period-page.html">
<link rel="import" href="components/vessel/vessel-page.html">

<link rel="import" href="data/db-gtog-contact.html">
<link rel="import" href="test.html">


<link rel="import" href="/bower_components/numeral-js/numeral-js.html">
<dom-module id="gtog-add-contract">
    <style is="custom-style" >
        * {
            font-family: 'rsuregular', sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        .left {
            margin: 0px 10px 0px 10px;
        }
    </style>
    <template>
    <db-gtog-contact></db-gtog-contact>

      <!-- <iron-ajax  auto
                  url="http://localhost:3000/gtog/contract/list"
                  handle-as="json"
                  last-response="{{lastResponse}}">
      </iron-ajax> -->
      <!-- <iron-ajax  auto
                  url="http://localhost:3000/typerice"
                  handle-as="json"
                  last-response="{{typeRice}}">
      </iron-ajax>
      <iron-ajax auto
                  url="http://localhost:3000/country/th"
                  handle-as="json"
                  last-response="{{contry}}">
      </iron-ajax> -->
				<!-- <template is="dom-repeat" items="{{lastResponse}}">
					<div>
						<h2>Record: <span>{{item.buyer_id}}</span></h2>
						<h1>{{item.buyer_name}}</h1>
					</div>
				</template> -->

            <content-panel>
              <grid>
                <nx-grid data="{{lastResponse}}">
                  <items type="primary">
                    <list item="buyer_name" label="ชื่อ" width="flex-2" type="string"></list>
                    <list item="contract_quantity" label="ทั้งหมด (ตัน) /" width="flex" type="number"></list>
                    <list item="contract_sent" label="ส่งแล้ว (ตัน) /" width="flex" type="number"></list>
                    <list item="contract_balance" label="เหลือ (ตัน)" width="flex" type="number"></list>
                  </items>
                  <items type="secondary" item="confirm_letter">
                    <list item="cl_no" label="Confirmation Letter" width="flex-2" type="string"></list>
                    <list item="cl_total_quantity" label="" width="flex" type="string"></list>
                    <list item="cl_ship_quantity" label="" width="flex" type="string"></list>
                    <list item="cmlBalanceRice" label="" width="flex" type="string"></list>
                  </items>
                  <items type="secondaryHalf" item="sub">
                    <list item="" label="" width="flex" type="string"></list>
                    <list item="period" label="+ เพิ่ม Confirmation Letter" width="flex-12" type="string"></list>
                  </items>
                  <items type="third" item="sub3">
                    <list item="period" label="งวดการส่งมอบ" width="flex-9" type="string"></list>
                  </items>
                  <items type="thirdHalf" item="sub3">
                    <list item="" label="" width="flex"></list>
                    <list item="period" label="+ เพิ่มงวด" width="flex-12" type="string"></list>
                  </items>
                  <template type="primary">
                    <input placeholder="text" value="primary">
                  </template>
            <template type="secondary">
                    <input placeholder="text" value="secondary">
                  </template>
            <template type="third">
                    <input placeholder="text" value="third">
                  </template>
            </nx-grid>
            </grid>
            <panel>
                <div class="left">
                    <iron-pages selected="{{vesselPage}}">
                        <panel-seleted>
                            <section-content name="detail">
                                <iron-pages selected="{{layerContent}}" attr-for-selected="name">
                                    <promise-detail name="primary" data="{{dataSelect}}" type-rice=[[typeRice]]></promise-detail>
                                    <promise-confirm name="secondary" data="{{dataSelect}}" type-rice=[[typeRice]] package=[[package]]></promise-confirm>
                                    <period-page name="third" data="{{dataSelect}}"></period-page>
                                </iron-pages>
                            </section-content>
                            <section-content name="print">
                                <vessel-print></vessel-print>
                            </section-content>
                            <section-content name="file">
                                <promise-fileup></promise-fileup>
                            </section-content>
                        </panel-seleted>
                        <!-- vesse -->

                        <panel-seleted-vessel>
                            <section-content name="detail">
                                <iron-pages selected="{{layerContent}}" attr-for-selected="name">
                                    <!-- <promise-detail name="primary" data="{{dataSelect}}"></promise-detail> -->
                                    <promise-confirm name="secondary" data="{{dataSelect}}"></promise-confirm>
                                    <period-page name="third" data="{{dataSelect}}"> </period-page>
                                </iron-pages>

                            </section-content>
                            <section-content name="print">
                                <vessel-page data="{{dataSelect}}"></vessel-page>
                            </section-content>
                            <section-content name="file">
                                <promise-fileup></promise-fileup>
                            </section-content>
                        </panel-seleted-vessel>
                        <!-- vesse -->
                    </iron-pages>
                </div>
            </panel>
            </content-panel>
    </template>
    <script>
        Polymer({
            is: "gtog-add-contract",
            listeners: {
                'nx-grid-tap': 'nxGridTap',
                'nx-grid-dblclick': 'nxGridDblclick'
            },
            behaviors: [
                gl.behavior.core,
                gl.behavior.locales
            ],
            properties: {
                layerContent: {
                    type: String,
                    value: "primary"
                },
                vesselPage: {
                    type: Number,
                    value: 0
                },
                idData: {
                    type:String,
                    value:''
                },
                data: {
                    type: Object,
                    notify: true,
                    value: function() {
                        return [{
                            id: 1,
                            promiseName: 'COFCO ประเทศจีน ',
                            totalRice: '1,000,000',
                            sendRice: '-',
                            balanceRice: '1,000,000',
                            date: '2016-05-15',
                            price: 'fob',
                            rice: [{
                                riceType: 'jasmineRice',
                                volume: 500000
                            }],
                            customerDetail: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311',
                            detail: 'ต้องการการข้าวเพิ่มอีก 1,000,000 ล้านตัน',
                            sub: [{
                                id: 1,
                                confirmLetter: 'Confirmmation Letter No. 1',
                                cmlTotalRice: '100,000',
                                cmlSendRice: '-',
                                cmlBalanceRice: '100,000',
                                dateconfirm: '2016-05-05',
                                detail: 'ต้องการการข้าวเพิ่มอีก 1,000,000 ล้านตัน',
                                typeRice: 'Thai White Rice 5% Brokens, 2015 Current New Crop',
                                price: 'fob',
                                totalQuantity: '1,000,000',
                                confirmItem: [{
                                    id: 1,
                                    package: '50',
                                    price: '392',
                                    weight: '80'
                                }, {
                                    id: 2,
                                    package: '25',
                                    price: '392',
                                    weight: '80'
                                }, ]
                            }, {
                                id: 2,
                                confirmLetter: 'Confirmmation Letter No. 2',
                                cmlTotalRice: '100,000',
                                cmlSendRice: '-',
                                cmlBalanceRice: '100,000',
                                dateconfirm: '2016-05-05',
                                detail: 'รายละเอียดเพิ่มเติม',
                                typeRice: 'Thai White Rice 5% Brokens, 2015 Current New Crop',
                                price: 'fob',
                                totalQuantity: '1,000,000',
                                confirmItem: [{
                                    id: 1,
                                    package: '25',
                                    price: '392',
                                    weight: '80'
                                }]
                            }],
                            sub3: [{
                                id: 1,
                                periodNo: 1,
                                period: 'งวดที่ 1',
                                city: [{
                                    idCity: 1,
                                    collapse: 'collapsel1',
                                    quantity: 50000,
                                    cityDestination: 'Husngpua',
                                    notifyParty: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                                }, {
                                    idCity: 2,
                                    collapse: 'collapsel2',
                                    quantity: 12000,
                                    cityDestination: 'Wuhua',
                                    notifyParty: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                                }],
                                sender: [{
                                    id: 1,
                                    collapse: 'collapsel1',
                                    cflNo: 'cflNo1',
                                    typeRiceNo: 'typeRiceNo1',
                                    confirmLetter: 'Confirmmation Letter No. 1',
                                    typeRice: 'Thai White Rice 5% Brokens, 2015 Current New Crop',
                                    actualShipper: 'Toumi Food And Product CO., LTD',
                                    riceType: 'Thai White Rice 5% Brokens,',
                                    price: '392',
                                    weight: '80',
                                    amount: '1000',
                                    marks: 'RED COFCO',
                                    package: '50',
                                    cityEnd: 'Shekou',
                                    bs: 'Sinotrans Thai Logistics Co., LTD',
                                    bn: 'SITGBUU0678088',
                                    vesselName: 'Hanjin Belawan V.1609',
                                    voidNo: 'V.1452-018E',
                                    lotNo: '14',
                                    pol: 'THBKK',
                                    etd: '2016-04-26',
                                    eta: '2016-05-10',
                                    pod: 'Yueyang (CHENG LING JI)',
                                    pode: 'Yueyang (CHENG LING JI)'
                                }, {
                                    id: 2,
                                    collapse: 'collapsel2',
                                    actualShipper: 'Capital Seril co.,ltd',
                                    riceType: 'Thai White Rice 5% Brokens,',
                                    price: '397',
                                    weight: '80',
                                    amount: '1000',
                                    marks: 'RED COFCO',
                                    package: '20',
                                    cityEnd: 'Thailand',
                                    bs: 'Sinotrans Thai Logistics Co., LTD',
                                    bn: 'SITGBUU0678088',
                                    vesselName: 'Hanjin Belawan V.1609',
                                    voidNo: 'V.1234',
                                    lotNo: '12',
                                    pol: 'THBKK',
                                    etd: '2016-04-26',
                                    eta: '2016-05-10',
                                    pod: 'Bangnatrad',
                                    pode: 'Bangnatrad'
                                }]
                            }, {
                                id: 2,
                                periodNo: 2,
                                period: 'งวดที่ 2',
                                city: [{
                                    idCity: 1,
                                    collapse: 'collapsel1',
                                    quantity: 50000,
                                    cityDestination: 'Husngpua',
                                    notifyParty: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                                }, {
                                    idCity: 2,
                                    collapse: 'collapsel2',
                                    quantity: 12000,
                                    cityDestination: 'Wuhua',
                                    notifyParty: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                                }],
                                sender: [{
                                    id: 1,
                                    collapse: 'collapsel1',
                                    cflNo: 'cflNo1',
                                    typeRiceNo: 'typeRiceNo1',
                                    confirmLetter: 'Confirmmation Letter No. 1',
                                    typeRice: 'Thai White Rice 5% Brokens, 2015 Current New Crop',
                                    actualShipper: 'Toumi Food And Product CO., LTD',
                                    riceType: 'Thai White Rice 5% Brokens,',
                                    price: '392',
                                    weight: '80',
                                    amount: '1000',
                                    marks: 'RED COFCO',
                                    package: '50',
                                    cityEnd: 'Shekou',
                                    bs: 'Sinotrans Thai Logistics Co., LTD',
                                    bn: 'SITGBUU0678088',
                                    vesselName: 'Hanjin Belawan V.1609',
                                    voidNo: 'V.1452-018E',
                                    lotNo: '14',
                                    pol: 'THBKK',
                                    etd: '2016-04-26',
                                    eta: '2016-05-10',
                                    pod: 'Yueyang (CHENG LING JI)',
                                    pode: 'Yueyang (CHENG LING JI)'
                                }, {
                                    id: 2,
                                    collapse: 'collapsel2',
                                    actualShipper: 'Capital Seril co.,ltd',
                                    riceType: 'Thai White Rice 5% Brokens,',
                                    price: '397',
                                    weight: '80',
                                    amount: '1000',
                                    marks: 'RED COFCO',
                                    package: '20',
                                    cityEnd: 'Thailand',
                                    bs: 'Sinotrans Thai Logistics Co., LTD',
                                    bn: 'SITGBUU0678088',
                                    vesselName: 'Hanjin Belawan V.1609',
                                    voidNo: 'V.1234',
                                    lotNo: '12',
                                    pol: 'THBKK',
                                    etd: '2016-04-26',
                                    eta: '2016-05-10',
                                    pod: 'Bangnatrad',
                                    pode: 'Bangnatrad'
                                }]
                            }, ]
                        }, {
                            id: 2,
                            promiseName: 'BULOG  ประเทศอินโดนีเซีย',
                            promiseNo: 'BULOG  ประเทศอินโดนีเซีย',
                            totalRice: '5,000,000',
                            sendRice: '2,000,000',
                            balanceRice: '3,000,000',
                            date: '2016-05-25',
                            price: 'fob',
                            rice: [{
                                riceType: 'jasmineRice',
                                volume: 900000
                            }],
                            customerDetail: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311',
                            detail: 'ต้องการการข้าวเพิ่มอีก 1,000,000 ล้านตัน',
                            sub: [{
                                id: 1,
                                confirmLetter: 'Confirmmation Letter No. 1',
                                cmlTotalRice: '200,000',
                                cmlSendRice: '200,000',
                                cmlBalanceRice: '-',
                                dateconfirm: '2015-05-05',
                                detail: 'ต้องการการข้าวเพิ่มอีก 1,000,000 ล้านตัน',
                                typeRice: 'Thai White Rice 5% Brokens, 2015 Current New Crop',
                                price: 'fob',
                                totalQuantity: '1,000,000',
                                confirmItem: [{
                                    id: 1,
                                    package: '40',
                                    price: '392',
                                    weight: '80'
                                }, {
                                    id: 2,
                                    package: '25',
                                    price: '392',
                                    weight: '80'
                                }]
                            }],
                            sub3: [{
                                id: 1,
                                periodNo: 1,
                                period: 'งวดที่ 1',
                                city: [{
                                    idCity: 1,
                                    collapse: 'collapsel1',
                                    quantity: 50000,
                                    cityDestination: 'Husngpua',
                                    notifyParty: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                                }, {
                                    idCity: 2,
                                    collapse: 'collapsel2',
                                    quantity: 12000,
                                    cityDestination: 'Wuhua',
                                    notifyParty: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                                }],
                                sender: [{
                                    id: 1,
                                    collapse: 'collapsel1',
                                    cflNo: 'cflNo2',
                                    typeRiceNo: 'typeRiceNo1',
                                    confirmLetter: 'Confirmmation Letter No. 1',
                                    typeRice: 'Thai White Rice 5% Brokens, 2015 Current New Crop',
                                    actualShipper: 'Toumi Food And Product CO., LTD',
                                    riceType: 'Thai White Rice 5% Brokens,',
                                    price: '392',
                                    weight: '80',
                                    amount: '1000',
                                    marks: 'RED COFCO',
                                    package: '50',
                                    cityEnd: 'Shekou',
                                    bs: 'Sinotrans Thai Logistics Co., LTD',
                                    bn: 'SITGBUU0678088',
                                    vesselName: 'Hanjin Belawan V.1609',
                                    voidNo: 'V.1452-018E',
                                    lotNo: '14',
                                    pol: 'THBKK',
                                    etd: '2016-04-26',
                                    eta: '2016-05-10',
                                    pod: 'Yueyang (CHENG LING JI)',
                                    pode: 'Yueyang (CHENG LING JI)'
                                }, {
                                    id: 2,
                                    collapse: 'collapsel2',
                                    actualShipper: 'Capital Seril co.,ltd',
                                    riceType: 'Thai White Rice 5% Brokens,',
                                    price: '397',
                                    weight: '80',
                                    amount: '1000',
                                    marks: 'RED COFCO',
                                    package: '20',
                                    cityEnd: 'Thailand',
                                    bs: 'Sinotrans Thai Logistics Co., LTD',
                                    bn: 'SITGBUU0678088',
                                    vesselName: 'Hanjin Belawan V.1609',
                                    voidNo: 'V.1234',
                                    lotNo: '12',
                                    pol: 'THBKK',
                                    etd: '2016-04-26',
                                    eta: '2016-05-10',
                                    pod: 'Bangnatrad',
                                    pode: 'Bangnatrad'
                                }]
                            }, {
                                id: 2,
                                periodNo: 2,
                                period: 'งวดที่ 2',
                                city: [{
                                    idCity: 1,
                                    collapse: 'collapsel1',
                                    quantity: 50000,
                                    cityDestination: 'Husngpua',
                                    notifyParty: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                                }, {
                                    idCity: 2,
                                    collapse: 'collapsel2',
                                    quantity: 12000,
                                    cityDestination: 'Wuhua',
                                    notifyParty: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                                }],
                                sender: [{
                                    id: 1,
                                    collapse: 'collapsel1',
                                    cflNo: 'cflNo2',
                                    typeRiceNo: 'typeRiceNo1',
                                    confirmLetter: 'Confirmmation Letter No. 1',
                                    typeRice: 'Thai White Rice 5% Brokens, 2015 Current New Crop',
                                    actualShipper: 'Toumi Food And Product CO., LTD',
                                    riceType: 'Thai White Rice 5% Brokens,',
                                    price: '392',
                                    weight: '80',
                                    amount: '1000',
                                    marks: 'RED COFCO',
                                    package: '50',
                                    cityEnd: 'Shekou',
                                    bs: 'Sinotrans Thai Logistics Co., LTD',
                                    bn: 'SITGBUU0678088',
                                    vesselName: 'Hanjin Belawan V.1609',
                                    voidNo: 'V.1452-018E',
                                    lotNo: '14',
                                    pol: 'THBKK',
                                    etd: '2016-04-26',
                                    eta: '2016-05-10',
                                    pod: 'Yueyang (CHENG LING JI)',
                                    pode: 'Yueyang (CHENG LING JI)'
                                }, {
                                    id: 2,
                                    collapse: 'collapsel2',
                                    actualShipper: 'Capital Seril co.,ltd',
                                    riceType: 'Thai White Rice 5% Brokens,',
                                    price: '397',
                                    weight: '80',
                                    amount: '1000',
                                    marks: 'RED COFCO',
                                    package: '20',
                                    cityEnd: 'Thailand',
                                    bs: 'Sinotrans Thai Logistics Co., LTD',
                                    bn: 'SITGBUU0678088',
                                    vesselName: 'Hanjin Belawan V.1609',
                                    voidNo: 'V.1234',
                                    lotNo: '12',
                                    pol: 'THBKK',
                                    etd: '2016-04-26',
                                    eta: '2016-05-10',
                                    pod: 'Bangnatrad',
                                    pode: 'Bangnatrad'
                                }]
                            }, ]
                        }, {
                            id: 3,
                            promiseName: 'NFA ประเทศฟิลิปินส์',
                            promiseNo: 'NFA ประเทศฟิลิปินส์',
                            totalRice: '3,000,000',
                            sendRice: '1,000,000',
                            balanceRice: '2,000,000',
                            date: '2016-05-21',
                            price: 'fob',
                            rice: [{
                                riceType: 'jasmineRice',
                                volume: 500000
                            }],
                            customerDetail: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311',
                            detail: 'ต้องการการข้าวเพิ่มอีก 1,000,000 ล้านตัน',
                            sub: [{
                                id: 1,
                                confirmLetter: 'Confirmmation Letter No. 1',
                                cmlTotalRice: '150,000',
                                cmlSendRice: '100,000',
                                cmlBalanceRice: '50,000',
                                dateconfirm: '2015-05-05',
                                detail: 'ต้องการการข้าวเพิ่มอีก 1,000,000 ล้านตัน',
                                typeRice: 'Thai White Rice 5% Brokens, 2015 Current New Crop',
                                price: 'cy',
                                totalQuantity: '1,000,000',
                                confirmItem: [{
                                    id: 1,
                                    package: '50',
                                    price: '392',
                                    weight: '80'
                                }, {
                                    id: 2,
                                    package: '25',
                                    price: '392',
                                    weight: '80'
                                }]
                            }],
                            sub3: [{
                                id: 1,
                                periodNo: 1,
                                period: 'งวดที่ 1',
                                city: [{
                                    idCity: 1,
                                    collapse: 'collapsel1',
                                    quantity: 50000,
                                    cityDestination: 'Husngpua',
                                    notifyParty: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                                }, {
                                    idCity: 1,
                                    collapse: 'collapsel2',
                                    quantity: 12000,
                                    cityDestination: 'Wuhua',
                                    notifyParty: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                                }],
                                sender: [{
                                    id: 1,
                                    collapse: 'collapsel1',
                                    cflNo: 'cflNo1',
                                    typeRiceNo: 'typeRiceNo1',
                                    confirmLetter: 'Confirmmation Letter No. 1',
                                    typeRice: 'Thai White Rice 5% Brokens, 2015 Current New Crop',
                                    actualShipper: 'Toumi Food And Product CO., LTD',
                                    riceType: 'Thai White Rice 5% Brokens,',
                                    price: '392',
                                    weight: '80',
                                    amount: '1000',
                                    marks: 'RED COFCO',
                                    package: '50',
                                    cityEnd: 'Shekou',
                                    bs: 'Sinotrans Thai Logistics Co., LTD',
                                    bn: 'SITGBUU0678088',
                                    vesselName: 'Hanjin Belawan V.1609',
                                    voidNo: 'V.1452-018E',
                                    lotNo: '14',
                                    pol: 'THBKK',
                                    etd: '2016-04-26',
                                    eta: '2016-05-10',
                                    pod: 'Yueyang (CHENG LING JI)',
                                    pode: 'Yueyang (CHENG LING JI)'
                                }, {
                                    id: 2,
                                    collapse: 'collapsel2',
                                    actualShipper: 'Capital Seril co.,ltd',
                                    riceType: 'Thai White Rice 5% Brokens,',
                                    price: '397',
                                    weight: '80',
                                    amount: '1000',
                                    marks: 'RED COFCO',
                                    package: '20',
                                    cityEnd: 'Thailand',
                                    bs: 'Sinotrans Thai Logistics Co., LTD',
                                    bn: 'SITGBUU0678088',
                                    vesselName: 'Hanjin Belawan V.1609',
                                    voidNo: 'V.1234',
                                    lotNo: '12',
                                    pol: 'THBKK',
                                    etd: '2016-04-26',
                                    eta: '2016-05-10',
                                    pod: 'Bangnatrad',
                                    pode: 'Bangnatrad'
                                }]
                            }, {
                                id: 2,
                                periodNo: 2,
                                period: 'งวดที่ 2',
                                city: [{
                                    idCity: 1,
                                    collapse: 'collapsel1',
                                    quantity: 50000,
                                    cityDestination: 'Husngpua',
                                    notifyParty: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                                }, {
                                    idCity: 2,
                                    collapse: 'collapsel2',
                                    quantity: 12000,
                                    cityDestination: 'Wuhua',
                                    notifyParty: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                                },{
                                    idCity: 3,
                                    collapse: 'collapsel2',
                                    quantity: 12000,
                                    cityDestination: 'Wuhu',
                                    notifyParty: 'COFCO International (Beijing) LTD,. 17F, COFCO Fortune Plaza, No. 8 Chao Yang Men, South Street, Chao Yang District, Beijing, 100020, P.R. Chian Fax: 010-5863 6311'
                                }],
                                sender: [{
                                    id: 1,
                                    collapse: 'collapsel1',
                                    cflNo: 'cflNo1',
                                    typeRiceNo: 'typeRiceNo1',
                                    confirmLetter: 'Confirmmation Letter No. 1',
                                    typeRice: 'Thai White Rice 5% Brokens, 2015 Current New Crop',
                                    actualShipper: 'Toumi Food And Product CO., LTD',
                                    riceType: 'Thai White Rice 5% Brokens,',
                                    price: '392',
                                    weight: '80',
                                    amount: '1000',
                                    marks: 'RED COFCO',
                                    package: '50',
                                    cityEnd: 'Shekou',
                                    bs: 'Sinotrans Thai Logistics Co., LTD',
                                    bn: 'SITGBUU0678088',
                                    vesselName: 'Hanjin Belawan V.1609',
                                    voidNo: 'V.1452-018E',
                                    lotNo: '14',
                                    pol: 'THBKK',
                                    etd: '2016-04-26',
                                    eta: '2016-05-10',
                                    pod: 'Yueyang (CHENG LING JI)',
                                    pode: 'Yueyang (CHENG LING JI)'
                                }, {
                                    id: 2,
                                    collapse: 'collapsel2',
                                    actualShipper: 'Capital Seril co.,ltd',
                                    riceType: 'Thai White Rice 5% Brokens,',
                                    price: '397',
                                    weight: '80',
                                    amount: '1000',
                                    marks: 'RED COFCO',
                                    package: '20',
                                    cityEnd: 'Thailand',
                                    bs: 'Sinotrans Thai Logistics Co., LTD',
                                    bn: 'SITGBUU0678088',
                                    vesselName: 'Hanjin Belawan V.1609',
                                    voidNo: 'V.1234',
                                    lotNo: '12',
                                    pol: 'THBKK',
                                    etd: '2016-04-26',
                                    eta: '2016-05-10',
                                    pod: 'Bangnatrad',
                                    pode: 'Bangnatrad'
                                }]
                            }, ]
                        }]
                    }
                }
            },
            created: function() {
                this.glSetTitle('ทำสัญญา');
                this.glSetLayout('layout-main');

            },
            ready: function() {
              // list county
              this.getDb('http://localhost:3000/api/gtog/contract/list',(data)=>{
                this.lastResponse=data;
              });
              // list riceType
              this.getDb('http://localhost:3000/api/common/typeRice',(data)=>{
                this.typeRice=data;
              });
              // list package
              this.getDb('http://localhost:3000/api/common/package',(data)=>{
                this.package=data;
              });
              // list port
              this.getDb('http://localhost:3000/api/common/port',(data)=>{
                this.ports=data;
              });
              // list country
              this.getDb('http://localhost:3000/api/common/country',(data)=>{
                this.country=data;
              });
              // list ship
              this.getDb('http://localhost:3000/api/common/ship',(data)=>{
                this.ship=data;
              });
              // list carrier
              this.getDb('http://localhost:3000/api/common/carrier',(data)=>{
                this.carrier=data;
              });
              // list buyer
              this.getDb('http://localhost:3000/api/common/buyer',(data)=>{
                this.buyer=data;
              });
              // list seller
              this.getDb('http://localhost:3000/api/common/seller',(data)=>{
                this.seller=data;
              });
            },
            attached: function() {
                this.layoutMain = this.glQuery('layoutMain');
                // this.getDb('http://localhost:3000/gtog/contract/list');
                // this.glQuery('conDb').getDb('http://localhost:3000/gtog/contract/list');

            },
            nxGridTap: function(e) {
                this.layerContent = e.detail.level;
                // console.log(this.layerContent);
                if (this.layerContent === 'third') {
                    this.vesselPage = 1;
                } else {
                    this.vesselPage = 0;
                }
                this.dataSelect = e.detail.data;
                if(e.detail.data.buyer_id){
                  this.idData = e.detail.data.buyer_id;
                }else {
                  this.idData = e.detail.data.cl_id;
                }
                // console.log(this.idData);
                // console.log(this.vesselPage);
                // console.log(this.dataSelect);
            },
            nxGridDblclick: function(e) {
                // if (e.detail.level == 'primary') {
                // this.glChangePath('/gtog/add-period');
                //this.layoutMain.changePath('/gtog/add-period');
                // }
            },
            getDb:function (url,callback) {
              // console.log(url);
              axios.get(url)
                .then(function(response){
                  // console.log(this.lastResponse=response.data);
                  callback(response.data);
                }.bind(this))
                .catch(function (error) {
                  //return this.lastResponse = error;
                }.bind(this));
            },
            postDb:function (url) {
              axios.get('/user', {
                params: {
                  ID: 12345
                }
              })
              .then(function (response) {
                console.log(response);
              })
              .catch(function (error) {
                console.log(error);
              });
            }
        });
    </script>
</dom-module>
