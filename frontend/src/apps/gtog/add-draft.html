<link rel="import" href="panel-seleted-perriod.html">
<link rel="import" href="panel-seleted-payment.html">
<link rel="import" href="components/grid/nx-grid.html">
<link rel="import" href="components/content-panel.html">
<link rel="import" href="components/list-edit/list-draft.html">
<link rel="import" href="components/bill/bill-create.html">
<link rel="import" href="components/bill/bill-fileup.html">
<link rel="import" href="components/payment/payment-pay.html">
<link rel="import" href="components/invoice/invoice-page.html">

<link rel="import" href="./components/payment/payment-detail.html">

<link rel="import" href="data/db-gtog-contact.html">


<dom-module id="gtog-add-draft">
  <style is="custom-style">
    * {
      font-family: 'rsuregular', sans-serif;
      -webkit-font-smoothing: antialiased;
    }

    .left {
      margin: 0px 10px 0px 10px;
      border: 1px solid #000;
    }
  </style>
  <template>
    <db-gtog-contact></db-gtog-contact>
    <!-- <gl-search-input result="{{result}}"></gl-search-input>
    {{result.name}} // {{result.searchType}} -->
    <content-panel>
      <grid>
        <list-draft data="{{dataPeriod}}" datainvoice="{{dataInvoice}}" dataround="{{dataRound}}">
          <items type="primary">
            <list item="blNo" label="Bill of Landing Number (B/L No.)" width="flex"></list>
          </items>
          <items type="secondary">
            <list item="invoiceNo" label="Invoice No." width="flex"></list>
          </items>
          <items type="third">
            <list item="round" label="ค่าใช้จ่ายในการส่งมอบ" width="flex"></list>
          </items>
        </list-draft>
      </grid>
      <panel>
        <div class="left">
          <iron-pages selected="{{changePage}}">
            <panel-seleted-perriod>
              <section-content name="detail">
                <iron-pages selected="{{layerContent}}" attr-for-selected="name">
                  <bill-create name="primary" data="{{dataSelect}}"></bill-create>
                  <!-- <invoice-save></invoice-save> -->
                  <invoice-page name="secondary" data="{{dataSelect}}"></invoice-page>
                </iron-pages>
              </section-content>
              <section-content name="file">
                <bill-fileup></bill-fileup>
              </section-content>
            </panel-seleted-perriod>

            <!-- payment -->

            <panel-seleted-payment>
                <section-content name="detail">
                  <payment-detail></payment-detail>
                </section-content>
                <section-content name="print">
                  <payment-pay></payment-pay>
                </section-content>
                <section-content name="file">
                  3
                </section-content>
            </panel-seleted-payment>
            <!-- payment -->
        </iron-pages>
          <!-- <gl-tabs get-data="{{panalBl}}">
            <section-content name="NEW">
              <bill-create></bill-create>
            </section-content>
          </gl-tabs> -->
        </div>
      </panel>
    </content-panel>
  </template>
  <script>
        Polymer({
            is: "gtog-add-draft",
            listeners: {
                'nx-grid-tap': 'nxGridTap'
            },
            behaviors: [
                gl.behavior.core,
                gl.behavior.locales
            ],
            properties: {
                layerContent: {
                    type: String,
                    value: "primary"
                },
                changePage: {
                    type: Number,
                    value: 0
                },
                panalBl: {
                    type: Array,
                    value: [
                        {
                            data: 'NEW'
                        },
                        {
                            data: 'data2'
                        }
                    ]
                },
                dataPeriod: {
                    type: Object,
                    notify: true,
                    value: function() {
                        return [
                          {
                            id: 1,
                            periodNo:'งวดที่ 1',
                            blNo: '0356A7812'
                          },
                          {
                            id: 2,
                            periodNo:'งวดที่ 1',
                            blNo: '0356A7813'
                          },
                          {
                            id: 3,
                            periodNo:'งวดที่ 1',
                            blNo: '0356A7814'
                          }
                      ]
                    }
                },
                dataInvoice:{
                  type:Object,
                  notify:true,
                  value:function(){
                      return [
                        {
                          id:1,
                          invoiceNo:'C123453'
                        },
                        {
                          id:2,
                          invoiceNo:'C123454'
                        },
                        {
                          id:3,
                          invoiceNo:'C123455'
                        }
                      ]
                  }
                },
                dataRound: {
                    type: Object,
                    notify: true,
                    value: function() {
                        return [
                          {
                            id: 1,
                            round:'1',
                            blNos: [
                              {
                                id:1,
                                blNo:'C123456'
                              },
                              {
                                id:2,
                                blNo:'C123457'
                              }
                            ]
                          },
                          {
                            id: 2,
                            round:'2',
                            blNos: [
                              {
                                id:1,
                                blNo:'C123458'
                              }
                            ]
                          }
                      ]
                    }
                }
            },
            created: function() {
                this.glSetTitle('งวดที่ 1');
                this.glSetLayout('layout-main');

            },
            attached: function() {
                this.layoutMain = this.glQuery('layoutMain');
            },
            nxGridTap: function(e) {
              // console.log(e.detail.level);
              // console.log(e.detail.data);
                this.layerContent = e.detail.level;
                // console.log(this.layerContent);
                if (this.layerContent === 'third') {
                    this.changePage = 1;
                } else {
                    this.changePage = 0;
                }
                this.dataSelect = e.detail.data;
            }
        });
    </script>
</dom-module>
