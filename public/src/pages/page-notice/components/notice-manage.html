<link rel="import" href="./../../components/format-number-behavior.html">
<link rel="import" href="./../../components/data-manage-behavior.html">
<link rel="import" href="./../../components/month-behavior.html">

<dom-module id="notice-manage">
    <template>
        <style is="custom-style" include="iron-flex iron-flex-alignment gl-color gl-size gl-table">
            * {
				text-align: left;
                font-family: 'rsuregular', sans-serif;
				-webkit-font-smoothing: antialiased;
			}
            paper-button{
                font-family: 'CSChatThaiUI', sans-serif !important;
                -webkit-font-smoothing: antialiased;
            }
            .title {
                background-color: orange;
                color: white;
                padding: 10px;
		    }
            .flex-end-justified {
                @apply(--layout-horizontal);
                @apply(--layout-end-justified);
            }
            .container{
                margin: 30px 50px 0px 0px;
            }
            .responsiveTable{
                padding:10px;
            }
        </style>
        <gl-form-panel set-padding = "0px 0px 20px 0px">
            <div class="title">ข้อมูลบริษัท</div>
            <gl-form-panel-body set-padding = "0px 0px 0px 0px" set-border="0px">
                <gl-grid-row width="{{getWidth}}">
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,2]]"></gl-grid-col>
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,4]]">
                        <gl-combo-box label="แสดงข้อมูลรายปี" items="{{quotaYear}}" value="{{selectYear}}"></gl-combo-box>
                    </gl-grid-col>
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,4]]">
                        <gl-form-input label="ชื่อ"></gl-form-input>
                    </gl-grid-col>
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,2]]"></gl-grid-col>
                </gl-grid-row>
                <gl-grid-row width="{{getWidth}}">
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,2]]"></gl-grid-col>
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,4]]">
                        <vaadin-date-picker label="วันที่"></vaadin-date-picker>
                    </gl-grid-col>
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,4]]">
                        <vaadin-date-picker label="วันที่ประกาศ"></vaadin-date-picker>
                    </gl-grid-col>
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,2]]"></gl-grid-col>
                </gl-grid-row>
                <div class="container flex-end-justified">
                    <paper-button class="gl-btn-success" raised>บันทึก</paper-button>
                    <paper-button class="gl-btn-primary" raised>ออกประกาศ</paper-button>
                </div>

            </gl-form-panel-body>
        </gl-form-panel>

        <gl-form-panel set-padding = "0px 0px 20px 0px">
            <div class="title">ข้อมูลบริษัท</div>
            <gl-form-panel-body set-padding = "0px 0px 0px 0px" set-border="0px">
                <div class="responsiveTable">
                <table class="gl-table-default">
                <thead>
                    <tr>
                        <th>ลำดับที่</th>
                        <th>ผู้ส่งออกข้าว</th>
                        <th>ปริมาณส่วนจัดสรรปี [[getYearForTableHead(dataList.data)]] </th>
                        <template is="dom-repeat" items="[[getQuantityForTableHead(dataList.data)]]">
                            <th>งวดที่ [[item.period]] [[getMonthName(item.month)]]</th>
                        </template>
                    </tr>
                </thead>
                <tbody>
                    <template is="dom-repeat" items="[[dataList.data]]">
                        <tr on-tap="_selectData" data="{{item}}" style="cursor:pointer;" id="addRedRegExporter">
                            <td>[[_num(index)]]</td>
                            <td>[[item.name]]</td>
                            <td>[[formatNumber(item.amount_update)]]</td>
                            <template is="dom-repeat" as="period" items="[[item.quantity]]">
                                <td>[[formatNumber(period.weigth_update)]]</td>
                            </template>
                        </tr>
                    </template>
                </tbody>
                <thead>
                    <tr>
                        <th colspan="2">รวม</th>
                        <th>[[formatNumber(dataList.sum.sum_amount_update)]]</th>
                        <template is="dom-repeat" items="[[dataList.sum.sum_period]]">
                            <th>[[formatNumber(item.sw_update)]]</th>
                        </template>
                    </tr>
                </thead>
                </table>
                </div>
            </gl-form-panel-body>
        </gl-form-panel>
    </template>
    <script>
        Polymer({
            is: 'notice-manage',
            behaviors:[FormatNumberBehavior,MonthBehavior,DataManageBehavior],
            _num:function(index){
                return index+1;
            },
            getQuantityForTableHead:function(item){
                return item[0].quantity;
            },
            getYearForTableHead:function(item){
                return item[0].year;
            }
        });
    </script>
</dom-module>