
<link rel="import" href="./components/confirm-list.html">
<link rel="import" href="./../components/panel-right/panel-right.html">

<dom-module id="page-confirm">
    <style is="custom-style" include="iron-flex iron-flex-factors iron-flex-alignment gl-size gl-color">
        * {
            font-family: 'rsuregular', sans-serif;
            -webkit-font-smoothing: antialiased;
        }
              paper-item{
        font-family: 'CSChatThaiUI', sans-serif !important;
        -webkit-font-smoothing: antialiased;
      }
        .container {
            margin-right: 10px;
        }
        
        .header {
            padding: 10px 0px 10px 10px;
            background-color: var(--paper-grey-100);
            color: var(--paper-grey-600);
            font-size: var(--font-size-h4);
        }
        
        .registor {
            margin: 20px;
        }
        
        .title {
            text-align: center;
            font-size: var(--font-size-h3);
        }
        
        .searchBox {
            padding: 5px;
            background-color: var(--gl-gray-lighter-color);
        }
        
        .elevation {
            border-radius: 5px;
            margin: 10px;
            padding: 5px;
        }
        
        .searchBorder {
            border: 1px solid #ddd;
            margin: 15px;
            border-radius: 3px
        }
        
        paper-material {
            background-color: var(--gl-white-color);
        }
        
        gl-search-input {
            margin: 30px 0px 0px 0px;
        }
        
        .contentHeader {
            padding: 10px 0px 20px 0px;
            font-size: 22px;
            text-align: center;
        }
        paper-button{
            
            height: 40px;
        }
        /*flex*/
        
        .flex-horizontal-with-ratios {
            @apply(--layout-horizontal);
        }
        
        .flexchild {
            @apply(--layout-flex);
        }
        
        .flex2child {
            @apply(--layout-flex-2);
        }
        
        .flex3child {
            @apply(--layout-flex-3);
        }
        
        .flex-horizontal {
            @apply(--layout-horizontal);
        }
        
        .flexchild {
            @apply(--layout-flex);
        }
        
        .flex-equal-around-justified {
            @apply(--layout-horizontal);
            @apply(--layout-around-justified);
        }
        
        .flex-center-justified {
            @apply(--layout-horizontal);
            @apply(--layout-center-justified);
        }
        .panel{
            border: 1px solid #ddd;
        }
        .panelHead{
            background-color: orange;
            color: white;
            padding: 10px;
        }
        .panelBody{ 
             padding:20px;
        }
        paper-tab{
            font-size: 20px;
        }
        paper-tab : hover{
            background-color: white !important;

        }
    </style>
    <template>
        <div class="layout vertical registor">
            <div class="flex">
                <div class="layout horizontal end-justified">
                    <!--<paper-button raised class="gl-btn-primary"on-tap="_toggleDrawer" id="addRedRegExporter"><iron-icon icon="add"></iron-icon> เพิ่มทะเบียนผู้ส่งออกข้าว</paper-button>-->
                </div>
            </div>
            <div class="flex title">
                ยืนยันรับส่วนจัดสรร ปีโควตา 2559
            </div>
            <div class="flex searchBox searchBorder">
                <gl-grid-row width="{{getWidth}}">  
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,1]]"></gl-grid-col>
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,2]]">
                        <!--<gl-form-label-input label="ปีโควตา" value="2559"></gl-form-label-input>-->
                    </gl-grid-col>
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,2]]">
                        <gl-form-dropdown-menu label="ประเภทข้าว">
                            <paper-listbox class="dropdown-content">
                                <paper-item>ข้าวขาว</paper-item>
                                <paper-item>ข้าวหัก</paper-item>
                            </paper-listbox>
                        </gl-form-dropdown-menu>
                    </gl-grid-col>
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,2]]">
                        <gl-form-dropdown-menu label="การคำนวณครั้งที่">
                            <paper-listbox class="dropdown-content">
                                <paper-item>1</paper-item>
                                <paper-item>2</paper-item>
                            </paper-listbox>
                        </gl-form-dropdown-menu>
                    </gl-grid-col>
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,2]]">
                        <gl-form-dropdown-menu label="ชื่อบริษัท">
                            <paper-listbox class="dropdown-content" attr-for-selected="name" selected="{{selectName}}">
                                <paper-item name="1">กมลกิจ บจก.</paper-item>
                                <paper-item name="2">กรุงเทพค้าข้าว บจก.</paper-item>
                            </paper-listbox>
                        </gl-form-dropdown-menu>
                    </gl-grid-col>
                </gl-grid-row>
                <gl-grid-row>
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,2]]"></gl-grid-col>
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,3]]"></gl-grid-col>
                    <gl-grid-col width="[[getWidth]]" grid="[[300,12],[500,3]]">
                        <paper-button class="gl-btn-primary" on-tap="_getDataCompanny" style="margin-top:20px" raised>{{btnName}}</paper-button>
                    </gl-grid-col>
                </gl-grid-row>
            </div>
            <div class="contentHeader">สรุปผลการยืนยันปริมาณจัดสรร</div>

            <div class="panel">
            <div class="panelHead">
                <paper-tabs selected="{{pageSelected}}">
                    <paper-tab>ยืนยันแล้ว</paper-tab>
                    <paper-tab>ยังไม่ยืนยัน</paper-tab>
                </paper-tabs>
            </div>
            <div class="panelBody">
            <div class="flex searchBorder">
                <div style="overflow-x:auto;">
                    
                    <iron-pages selected="{{pageSelected}}">
                        <section>
                             <confirm-list data="[[dataAmount]]" on-data-select="_onDataSelect" status="confirm"></confirm-list>
                        </section>
                        <section>
                             <confirm-list data="[[dataAmount]]" on-data-select="_onDataSelect" status="nonConfirm"></confirm-list>
                        </section>
                    </iron-pages>
                   
                </div>
                </div>
            </div>
            </div>
        </div>
            
        <panel-right title="ยืนยันรับส่วนจัดสรร">
            <template is="dom-if" if="[[rendered]]">
               <confirm-allocate-edit data="{{dataSelect}}" status="{{statusSelect}}"></confirm-allocate-edit>
            </template>
		</panel-right>
    </template>
    <script>
        Polymer({
            is: "page-confirm",
            observers:[
                '_chageCompanyName(selectName)'
            ],
            properties: {
                layerContent: {
                    type: String,
                    value: "detailRegExporter"
                },
                data:{
                    type: Object,
                    value: {
                        header:[
                            'ผู้ส่งออก',
                            'ปริมาณโควตารวม',
                            'งวดที่ 1 (มกราคม)',
                            'งวดที่ 2 (เมษายน)',
                            'งวดที่ 3 (กรกฏาคม)'
                        ]
                    }
                    
                },
                dataAmount:{
                    type: Object,
                    value:
                      {
                        header:[
                            'ผู้ส่งออก',
                            'ปริมาณโควตารวม',
                            'งวดที่ 1 (มกราคม)',
                            'งวดที่ 2 (เมษายน)',
                            'งวดที่ 3 (กรกฏาคม)'
                        ],
                        content:[
                            {
                                a:'กมลกิจ บจก',
                                b:'899.00',
                                c:'449.00',
                                d:'225.00',
                                e:'225.00'
                            },
                            {
                                a:'กรุงเทพค้าข้าว',
                                b:'135.00',
                                c:'67.00',
                                d:'34.00',
                                e:'34.00'
                            }
                        ]
                       
                      }
                },
                searchType: {
                    type: Object,
                    value: [{
                        id: 1,
                        name: 'ทั้งหมด'
                    }, {
                        id: 2,
                        name: 'ผู้ส่งออกที่ถูกระงับ'
                    } ]
                },
            
            },
            ready:function(){         
                this.btnName = 'แสดงทั้งหมด';
                Polymer.RenderStatus.afterNextRender(this,function(){
                this.importHref(this.resolveUrl('./components/confirm-allocate-edit.html'), (e)=>{
                    this.rendered = true;
                }, (e)=> {
                    console.log('error')
                });
                });
            },
            _onDataSelect:function(e){
                this.pageSelected = 0;
                this.statusConfirm = 'cofirm';
                this.$$('panel-right').toggle();
                this.dataSelect = e.detail.data;
                this.statusSelect = e.detail.status;
            }
        });
    </script>
</dom-module>