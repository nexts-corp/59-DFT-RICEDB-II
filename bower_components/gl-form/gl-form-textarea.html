
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-autogrow-textarea/iron-autogrow-textarea.html">
<link rel="import" href="../iron-form-element-behavior/iron-form-element-behavior.html">
<link rel="import" href="../paper-input/paper-input-behavior.html">
<link rel="import" href="../paper-input/paper-input-char-counter.html">
<link rel="import" href="../paper-input/paper-input-container.html">
<link rel="import" href="../paper-input/paper-input-error.html">


<dom-module id="gl-form-textarea">
   
    <template>
    <paper-input-container no-label-float$="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]">

      <label hidden$="[[!label]]" aria-hidden="true">[[label]]</label>

      <iron-autogrow-textarea id="input" class="paper-input-input"
        bind-value="{{value}}"
        disabled$="[[disabled]]"
        autocomplete$="[[autocomplete]]"
        autofocus$="[[autofocus]]"
        inputmode$="[[inputmode]]"
        name$="[[name]]"
        placeholder$="[[placeholder]]"
        readonly$="[[readonly]]"
        required$="[[required]]"
        maxlength$="[[maxlength]]"
        autocapitalize$="[[autocapitalize]]"
        rows$="[[rows]]"
        max-rows$="[[maxRows]]"
        on-change="_onChange"
        on-blur="InputOnBlur"
        on-focus="InputOnFocus"></iron-autogrow-textarea>

      <template is="dom-if" if="[[errorMessage]]">
        <paper-input-error>[[errorMessage]]</paper-input-error>
      </template>

      <template is="dom-if" if="[[charCounter]]">
        <paper-input-char-counter></paper-input-char-counter>
      </template>

        </paper-input-container>
    </template>
    <script>
        Polymer({
            is: 'gl-form-textarea',
            behaviors: [
                Polymer.PaperInputBehavior,
                Polymer.IronFormElementBehavior
            ],
             properties: {
                _ariaLabelledBy: {
                    observer: '_ariaLabelledByChanged',
                    type: String
                },

                _ariaDescribedBy: {
                    observer: '_ariaDescribedByChanged',
                    type: String
                },
                rows: {
                    type: Number,
                    value: 1
                },
                maxRows: {
                type: Number,
                value: 0
                }
            },
            _ariaLabelledByChanged: function(ariaLabelledBy) {
            this.$.input.textarea.setAttribute('aria-labelledby', ariaLabelledBy);
            },

            _ariaDescribedByChanged: function(ariaDescribedBy) {
            this.$.input.textarea.setAttribute('aria-describedby', ariaDescribedBy);
            },

            get _focusableElement() {
            return this.$.input.textarea;
            },
            InputOnBlur : function(e){
                console.log(e.target.validate());
                if(e.target.validate()){
                    console.log('Sucess!!');
                    this.customStyle['--paper-input-container-color'] =  "green";
                }
                this.updateStyles();
            },
            InputOnFocus : function(e){
                console.log('focus');
                this.customStyle['--paper-input-container-color'] =  "#737373";
                this.updateStyles();
            }
        });
    </script>
</dom-module>
