<link rel="import" href="fee-exports.html">
<dom-module id="list-of-fee-detail">
<style include="iron-flex iron-flex-factors iron-flex-alignment gl-styles">
*{
  font-family: 'CSChatThaiUI', sans-serif;
  -webkit-font-smoothing: antialiased;
}
.table-body > tr > td{
  cursor:pointer
}

.table-head > tr > th:nth-child(1),
.table-body > tr > td:nth-child(1),
.table-head > tr > th:nth-child(3),
.table-body > tr > td:nth-child(3),
.table-head > tr > th:nth-child(4)  {
  width: 20%;
  text-align: center;
}
.table-head > tr > th:nth-child(2),
.table-body > tr > th:nth-child(2){
  width: 40%;
}
.table-body > tr > td:nth-child(4) {
  text-align: right;
}
.table-foot > tr > td {
  padding: 16px;
}
.addconfirm{
  margin-bottom: 16px;
}
</style>
<template>
  <iron-pages selected="{{pageSelected}}" attr-for-selected="name">
    <div name="listOfFeedetail">
  <gl-form-panel set-padding="10px 20px 10px 20px" set-border="1px">
    <gl-form-panel-head label="" set-padding="10px" set-border="1px">
          </gl-form-panel-head>
        <!-- <gl-form-panel-body label="" set-padding="10px" set-border="1px"> -->
        <!-- [[data.contract_quantity_confirm_balance]] -->
        <table class="gl-table-default">
          <thead class="table-head">
            <tr>
              <th>ลำดับที่</th>
              <th>ชื่อสัญญาย่อย</th>
              <th>จำนวนใบกำกับสินค้า</th>
              <th>มูลค่า</th>
            </tr>
          </thead>
          <!-- <tfoot class="table-foot">
            <tr>
              <td></td>
              <td>รวม</td>
              <td>[[data.contract_quantity_confirm]]</td>
              <td></td>
            </tr>
          </tfoot> -->
          <tbody class="table-body">
            3112/[[dataForSelect]]
            <template is="dom-if" if="[[!_isHave(data.fee_detail)]]">
              <template is="dom-repeat" items="[[data.fee_detail]]">
                <tr on-tap="getFeeDetail" data="[[item]]">
                  <td>  [[_ObcountIndex(index)]] </td>
                  <td> [[item.invoice_no]]</td>
                  <td> [[item.invoice_count]]</td>
                  <td>มูลค่า</td>
                </tr>
              </template>
            </template>
            <template is="dom-if" if="[[_isHave(data.fee_detail)]]">
                <tr >
                  <td colspan="4">  ไม่มีข้อมูล</td>
                </tr>
            </template>
          </tbody>
        </table>
        <!-- </gl-form-panel-body> -->
    </gl-form-panel>
    </div>
    <div name="feeDetail">
      <fee-exports data="[[dataSelected]]" data-for-select="[[dataForSelect]]"></fee-exports>
      <!-- <confirm-detail data-for-select="[[dataForSelect]]" is-view-seleted="[[isEdit]]" is-input-disabled="[[!isInputDisabled]]" data="[[dataSelected]]"></confirm-detail> -->
    </div>
    </iron-pages>
</template>
<script>
Polymer({
  is: "list-of-fee-detail",
  behaviors: [
      g2gCongtroller,
      g2gModelBehavior,
      FormatNumberBehavior
  ],
  listeners:{
    'back-page-confirm':'_backPageConfirm',
    'get-confirm-detail':'_getConfirmDetail'
  },
  properties: {
    pageSelected: {
      type: String,
      value:'listOfFeedetail'
    },
    dataForSelect:{
      type: Object,
      value:{}
    },
    dataSelected: {
      type: Object
    },
  },
  getFeeDetail:function (e) {
    console.log(this.dataForSelect);
    console.log(e.currentTarget.data.fee_det_id);
    this.read('./g2g/fee/detail/id/'+e.currentTarget.data.fee_det_id,(data)=>{
      this.dataSelected=data;
      this.notifyPath('dataSelected');
      this.pageSelected= 'feeDetail'
    });
    // this.dataForSelect.contract_quantity_confirm_balance=this.data.contract_quantity_confirm_balance;
    // // console.log(this.data);
    // // this.dataForConfirm.package=data;
    // this.notifyPath('dataForSelect.contract_quantity_confirm_balance');
    // this.dataSelected = e.currentTarget.data;
    // this.pageSelected = 'confirmDetail';
  },
  _backPageConfirm:function (data) {
    this.pageSelected='listOfFeedetail';
  }

});
</script>
</dom-module>
